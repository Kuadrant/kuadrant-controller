---
apiVersion: apim.kuadrant.io/v1alpha1
kind: AuthPolicy
metadata:
  name: toystore
spec:
  targetRef:
    group: gateway.networking.k8s.io
    kind: HTTPRoute
    name: toystore
  policy:
  - action: CUSTOM
    rules:
    - to:
      - operation:
          methods: ["GET"]
          paths: ["/toy"]
    provider: kuadrant-authorization
  - action: DENY
    rules:
    - to:
      - operation:
          methods: ["DELETE"]
          paths: ["/deleteAll"]
